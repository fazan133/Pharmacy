# PharmacyERP - Pharmacy Management System

A modern, production-ready Pharmacy ERP Web Application built with React, TypeScript, and Supabase.

## Tech Stack

- **Frontend**: React 18 + TypeScript + Vite
- **UI Library**: Material UI (MUI) 6 + MUI X DataGrid
- **State Management**: Zustand (auth), TanStack Query (server state)
- **Backend**: Supabase (Auth, PostgreSQL, Storage)
- **Forms**: React Hook Form
- **Date Handling**: date-fns
- **Notifications**: react-hot-toast

## Project Structure

```
src/
├── app/                    # App configuration
│   ├── routes.tsx          # Route definitions
│   └── theme.ts            # MUI theme customization
├── components/
│   └── common/             # Reusable UI components
├── layouts/
│   └── DashboardLayout.tsx # Main app layout
├── lib/
│   └── supabase.ts         # Supabase client
├── modules/                # Feature-based modules
│   ├── auth/               # Authentication
│   ├── dashboard/          # Dashboard
│   ├── masters/            # Master data management
│   ├── purchase/           # Purchase invoices
│   ├── sales/              # POS & Sales
│   ├── inventory/          # Stock management
│   └── reports/            # Business reports
├── types/                  # TypeScript definitions
└── App.tsx                 # Root component
```

## Features

### 1. Authentication
- Supabase Auth integration
- Role-based access control (Admin/Staff)
- Protected routes

### 2. Master Data Management
- Products with barcode support
- Categories, Companies, HSN Codes
- Drug Schedules & Formulas
- Product Types
- Suppliers with credit terms
- Customers with credit limits

### 3. Purchase Module
- Purchase invoice entry
- Batch creation with expiry tracking
- GST calculation
- Supplier invoice mapping

### 4. Sales/POS
- Keyboard-friendly POS interface
- Barcode/product search
- FIFO batch selection for expiry management
- Quick cash sales

### 5. Inventory Management
- Batch-wise stock tracking
- Low stock alerts
- Expiry alerts (30/60/90 days)
- Stock ledger (audit trail)
- Manual stock adjustments

### 6. Reports
- Purchase/Sales registers
- Stock summaries
- GST reports
- Profit & Loss

## Database Setup

1. Create a new Supabase project
2. Run the SQL scripts in order:
   - `supabase/schema.sql` - Tables, functions, triggers
   - `supabase/rls_policies.sql` - Row Level Security

3. Configure environment variables:
```env
VITE_SUPABASE_URL=your-project-url
VITE_SUPABASE_ANON_KEY=your-anon-key
```

## Getting Started

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build
```

## Key Business Rules

1. **Stock Tracking**: Stock is tracked at BATCH level, not product level
2. **FIFO Sales**: Oldest batches (by expiry) are sold first
3. **Master Data**: All masters support `is_active` and `is_hidden` flags
4. **GST**: GST values are stored, not calculated
5. **Auto-numbering**: Invoice numbers auto-generated by financial year

## Environment Variables

```env
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJxx...
```

## Scripts

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm run preview` - Preview production build
- `npm run lint` - Run ESLint

## License

Private - All rights reserved
